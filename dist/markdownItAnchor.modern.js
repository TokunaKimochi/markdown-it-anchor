const e={false:"push",true:"unshift"},n=Object.prototype.hasOwnProperty,t=(e,t,r)=>{let i=e,l=2;if(r&&n.call(t,i))throw Error(`User defined id attribute '${e}' is NOT unique. Please fix it in your markdown to continue.`);for(;n.call(t,i);)i=`${e}-${l++}`;return t[i]=!0,i},r=(e,n)=>{n=Object.assign({},r.defaults,n),e.core.ruler.push("anchor",e=>{const r={},i=e.tokens,l=e.env,o=Array.isArray(n.level)?(a=n.level,e=>a.includes(e)):(e=>n=>n>=e)(n.level);var a;i.filter(e=>"heading_open"===e.type).filter(e=>o(Number(e.tag.substr(1)))).forEach(o=>{const a=i[i.indexOf(o)+1].children.filter(e=>"text"===e.type||"code_inline"===e.type).reduce((e,n)=>e+n.content,"");let c=o.attrGet("id");c=null==c?t(n.slugify(a,l),r,!1):t(c,r,!0),o.attrSet("id",c),n.permalink&&n.renderPermalink(c,n,e,i.indexOf(o)),n.callback&&n.callback(o,{slug:c,title:a})})})};r.defaults={level:1,slugify:(e,n)=>encodeURIComponent(String(e).trim().toLowerCase().replace(/\s+/g,"-")),permalink:!1,renderPermalink:(n,t,r,i)=>{const l=[Object.assign(new r.Token("link_open","a",1),{attrs:[["class",t.permalinkClass],["href",t.permalinkHref(n,r)],...Object.entries(t.permalinkAttrs(n,r))]}),Object.assign(new r.Token("html_block","",0),{content:t.permalinkSymbol}),new r.Token("link_close","a",-1)];t.permalinkSpace&&l[e[!t.permalinkBefore]](Object.assign(new r.Token("text","",0),{content:" "})),r.tokens[i+1].children[e[t.permalinkBefore]](...l)},permalinkClass:"header-anchor",permalinkSpace:!0,permalinkSymbol:"Â¶",permalinkBefore:!1,permalinkHref:e=>"#"+e,permalinkAttrs:e=>({})};export default r;
//# sourceMappingURL=markdownItAnchor.modern.js.map
